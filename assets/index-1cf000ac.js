import{d as B,c as Y,r as V,h as O,a as S,y as c,i as s,j as A,l as N,k as o,m as u,w as p,p as L,q as D,s as h,t as E,a0 as R,n as H,o as J,G as d,_ as j}from"./index-12087f41.js";import q from"./useMsg-a62a9eed.js";const G={id:"child-child-1"},$=B({name:"ChildChild1",__name:"index",setup(F){const{texts:n}=Y("ChildChild1"),{addApiMsg:x}=q(),m=V(0),r=V([]),t=O({input:"",check:1,select:-1,DateType:1,StartDate:S().add(-1,"M").startOf("d").toJSON(),EndDate:S().add(1,"d").startOf("d").toJSON(),Pagination:{PageIndex:1,PageSize:20,TotalCount:50}}),g=c(()=>d.chain(v.value).filter(l=>l.Status===1).size().value()),f=c({get(){return!!(g.value&&r.value.length===g.value)},set(l){r.value=l?d.chain(v.value).filter(e=>e.Status===1).map("ID").value():[]}}),v=c(()=>{const l=t.Pagination.TotalCount%t.Pagination.PageSize,e=d.floor(t.Pagination.TotalCount/t.Pagination.PageSize),b=t.Pagination.PageIndex>e;return d.times(l&&b?l:t.Pagination.PageSize,()=>({ID:d.random(0,9999999),Status:1,statusStr:n.value.正常,bonusStr:d.random(0,1077770022e-2).toLocaleString(),realBonusStr:d.random(0,104440055e-2).toLocaleString(),createDateStr:S().format("YYYY/MM/DD HH:mm:SS"),OperationAccount:"Admin"}))}),_=c(()=>{const l=n.value,e={label:l.全部,value:-1};return{dateType:[{label:l.申請時間,value:1},{label:l.審核時間,value:2}],select:[e,{label:l.待處理,value:1},{label:l.通過,value:2},{label:l.失敗,value:3}],check:[{label:l.A,value:1},{label:l.B,value:2},{label:l.C,value:3}]}});function P(){m.value+=1,r.value=[],setTimeout(()=>{x(n.value.查詢,{Code:0}),m.value-=1},1e3)}function C(){t.Pagination.PageIndex=1}return(l,e)=>{const b=s("rk-input"),y=s("label-selector"),T=s("rk-date-range-input"),w=s("rk-select"),k=s("rk-check"),z=s("rk-button"),i=s("rk-table-col"),I=s("rk-table"),U=s("rk-page");return D(),A("div",G,[N("form",{onSubmit:e[6]||(e[6]=L(a=>(C(),P()),["prevent"]))},[o(b,{modelValue:t.input,"onUpdate:modelValue":e[0]||(e[0]=a=>t.input=a),label:u(n).名稱},null,8,["modelValue","label"]),o(T,{start:t.StartDate,"onUpdate:start":e[2]||(e[2]=a=>t.StartDate=a),end:t.EndDate,"onUpdate:end":e[3]||(e[3]=a=>t.EndDate=a),"display-format":"YYYY/MM/DD"},{label:p(()=>[o(y,{modelValue:t.DateType,"onUpdate:modelValue":e[1]||(e[1]=a=>t.DateType=a),opts:_.value.dateType},null,8,["modelValue","opts"])]),_:1},8,["start","end"]),o(w,{modelValue:t.select,"onUpdate:modelValue":e[4]||(e[4]=a=>t.select=a),label:u(n).狀態,opts:_.value.select},null,8,["modelValue","label","opts"]),o(k,{modelValue:t.check,"onUpdate:modelValue":e[5]||(e[5]=a=>t.check=a),label:u(n).款式,opts:_.value.check},null,8,["modelValue","label","opts"]),o(z,{submit:"",loading:m.value,color:"success"},{default:p(()=>[h(E(u(n).查詢),1)]),_:1},8,["loading"])],32),o(I,{data:v.value,loading:m.value},{default:p(()=>[o(i,{w:50},R({default:p(a=>[a.Status===1?(D(),H(k,{key:0,modelValue:r.value,"onUpdate:modelValue":e[8]||(e[8]=M=>r.value=M),opts:[{value:a.ID,label:""}],multiple:""},null,8,["modelValue","opts"])):J("",!0)]),_:2},[g.value?{name:"th",fn:p(()=>[o(k,{modelValue:f.value,"onUpdate:modelValue":e[7]||(e[7]=a=>f.value=a),"default-value":!1,opts:[{value:!0,label:""}]},null,8,["modelValue"])]),key:"0"}:void 0]),1024),o(i,{title:u(n).試算得分,prop:"bonusStr",w:150},null,8,["title"]),o(i,{title:u(n).實際得分,prop:"realBonusStr",w:150},null,8,["title"]),o(i,{title:u(n).申請時間,prop:"createDateStr","min-w":180},null,8,["title"]),o(i,{class:"green",title:u(n).狀態,prop:"statusStr",w:90},null,8,["title"]),o(i,{title:u(n).操作者,prop:"OperationAccount",w:150},null,8,["title"])]),_:1},8,["data","loading"]),o(U,{modelValue:t.Pagination.PageIndex,"onUpdate:modelValue":e[9]||(e[9]=a=>t.Pagination.PageIndex=a),size:t.Pagination.PageSize,"onUpdate:size":e[10]||(e[10]=a=>t.Pagination.PageSize=a),total:t.Pagination.TotalCount,onChange:P},null,8,["modelValue","size","total"])])}}});const W=j($,[["__scopeId","data-v-a9d56e23"]]);export{W as default};
