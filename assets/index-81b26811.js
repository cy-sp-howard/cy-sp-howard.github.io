import{d as L,v as te,r as w,f as K,e as ne,c as oe,b as R,x as se,h as ae,y as U,z as D,A as le,i as C,q as o,j as m,k as r,w as S,F as I,B as N,n as v,l as a,t as k,p as H,C as X,m as c,R as Y,T as ue,D as re,E as ce,o as V,G as h,H as J,_ as P,u as Q,I as G,J as ie,K as j,M as _e,N as de,O as Z,P as pe,Q as ve,S as fe,U as me,V as ge,W as ye,X as he,Y as ke}from"./index-ce2f2e21.js";import{_ as xe,a as be,T as we}from"./themeBtn-dd883f77.js";const $e={id:"tab"},Se=L({__name:"tab",setup(x){const l=te("excludeAlivePage")||w([]),g=K(),u=ne(),{texts:i,rootTexts:f}=oe("Web"),$=R(),{record:e}=se({record:[]}),s=w([]);let b=new AbortController;const _=w(""),p=w(null),M=ae({left:"0px",top:"0px"}),d=U(()=>{const t=u.getRoutes();return h.chain(e.value).map(n=>({text:f.value[n].routeName,to:{name:n},caching:s.value.includes(n)})).filter(n=>h.some(t,A=>A.name===n.to.name)).value()});D(g,t=>{typeof t.name=="string"&&!["NotFound"].includes(t.name)&&ee(t.name),setTimeout(()=>{var n;p.value&&((n=p.value.$el.querySelector(".router-link-active"))==null||n.scrollIntoView({behavior:"smooth"}))},300)},{immediate:!0}),D(()=>$.token,t=>{t||(e.value=[],s.value=[])});function W(t,n){_.value=n;const{clientX:A,clientY:z}=t;M.top=z+"px",M.left=A+"px",b=new AbortController,addEventListener("mousedown",T,{signal:b.signal})}function T(){_.value="",b.abort()}function q(t){l.value.push(t),u.replace({name:"NotFound"}).finally(()=>{h.pull(l.value,t);const n=h.chain(history.state).omit(["back","current","forward","replaced","position","scroll"]).mapValues(()=>{}).value();u.replace({name:t,state:n})})}function B(t){const n=e.value.indexOf(t);l.value.push(t),J(()=>{h.pull(l.value,t)}),h.pull(e.value,t),h.pull(s.value,t),e.value.length?g.name===t&&u.push({name:e.value[n]||e.value[n-1]}):u.push("/")}async function F(t){g.name!==t&&await u.push({name:t}),h.chain(e.value).cloneDeep().pull(t).each(B).value()}function ee(t){e.value.push(t),s.value.push(t),e.value=h.uniq(e.value),s.value=h.uniq(s.value)}return le(T),(t,n)=>{const A=C("svg-icon"),z=C("rk-scroll");return o(),m("div",$e,[r(ue,{class:"wrapper",ref_key:"tab",ref:p,tag:"div",name:"tab"},{default:S(()=>[(o(!0),m(I,null,N(d.value,y=>(o(),v(c(Y),{key:y.to.name,to:y.to,class:X({caching:y.caching}),onContextmenu:H(E=>W(E,y.to.name),["prevent"])},{default:S(()=>[a("span",null,k(y.text),1),r(A,{icon:"close",onClick:H(E=>B(y.to.name),["prevent"])},null,8,["onClick"])]),_:2},1032,["to","class","onContextmenu"]))),128))]),_:1},512),r(z,{"get-target":()=>p.value.$el,horizontal:"","mutation-opt":{childList:!0}},null,8,["get-target"]),_.value?(o(),v(ce,{key:0,to:"body"},[a("ol",{class:"context-menu",style:re(M)},[a("li",{onMousedown:n[0]||(n[0]=y=>q(_.value))},k(c(i).重整),33),a("li",{onMousedown:n[1]||(n[1]=y=>B(_.value))},k(c(i).關閉),33),a("li",{onMousedown:n[2]||(n[2]=y=>F(_.value))},k(c(i).關閉其它),33),a("li",{onMousedown:n[3]||(n[3]=y=>(F(_.value),B(_.value)))},k(c(i).關閉所有),33)],4)])):V("",!0)])}}});const Me=P(Se,[["__scopeId","data-v-e4d0b44f"]]),Ce=["title"],Be=L({__name:"logoutBtn",setup(x){const l=Q(),g=R(),u=U(()=>l.texts.Web);function i(f){u.value.登出===f&&G()}return(f,$)=>{const e=C("svg-icon"),s=C("rk-select");return~c(g).theme?(o(),m("div",{key:0,class:"logout",title:u.value.登出},[r(e,{class:"logout",icon:"logout",onClick:$[0]||($[0]=b=>c(G)())})],8,Ce)):(o(),v(s,{key:1,opts:[{value:u.value.登出}],"onUpdate:modelValue":i},{default:S(()=>[r(e,{icon:"setting"})]),_:1},8,["opts"]))}}});const Ae=P(Be,[["__scopeId","data-v-6d857cad"]]),Ie={class:"info"},Le=L({__name:"header",setup(x){const l=R();return(g,u)=>(o(),m("header",null,[a("h6",null,[(o(!0),m(I,null,N(c(l).pagePath,(i,f)=>(o(),m("span",{key:f},k(i),1))),128))]),r(Me),a("div",Ie,[a("span",{onClick:u[0]||(u[0]=i=>c(l).theme=0)},k(c(l).time),1),a("div",null,[a("b",null,k(c(l).account),1),r(Ae),~c(l).theme?(o(),v(xe,{key:0})):V("",!0),~c(l).theme?(o(),v(be,{key:1})):V("",!0),~c(l).theme?(o(),v(we,{key:2})):V("",!0)])])]))}});const Pe=P(Le,[["__scopeId","data-v-d403310c"]]),Te=L({__name:"link",props:{item:{},extractOnlyChild:{type:Boolean,default:!0}},emits:["unfold"],setup(x,{expose:l,emit:g}){const u=x,i=pe(),f=K(),$=Q(),e=w(!1),s=w(!1),b=U(()=>$.texts[u.item.name].routeName);D(()=>f.name,()=>{J(p)});function _(){e.value||g("unfold"),e.value=!e.value}function p(){var d;s.value=!!((d=i==null?void 0:i.proxy)!=null&&d.$el.querySelector(".router-link-active")),s.value&&!e.value&&_()}function M(d){d.style.setProperty("--h",`${d.offsetHeight}px`)}return ie(p),l({unfold:e}),(d,W)=>{const T=C("svg-icon");return d.extractOnlyChild&&d.item.children.length===1?(o(),v(O,{key:0,item:d.item.children[0]},null,8,["item"])):(o(),m("div",{key:1,class:X(["link",{unfold:e.value,active:s.value}])},[d.item.children.length?(o(),m(I,{key:0},[a("h3",{onClick:_},[j(d.$slots,"prefix",{},void 0,!0),a("span",null,k(b.value),1),r(T,{icon:"down"})]),r(Z,{name:"unfold",onBeforeLeave:M},{default:S(()=>[_e(a("div",null,[(o(!0),m(I,null,N(d.item.children,(q,B)=>(o(),v(O,{key:B,item:q,"extract-only-child":!1},null,8,["item"]))),128))],512),[[de,e.value]])]),_:1})],64)):(o(),v(c(Y),{key:1,to:{name:d.item.name}},{default:S(()=>[j(d.$slots,"prefix",{},void 0,!0),a("span",null,k(b.value),1)]),_:3},8,["to"]))],2))}}});const O=P(Te,[["__scopeId","data-v-c3b0c21f"]]),Ve=x=>(me("data-v-1fb748fd"),x=x(),ge(),x),Re={class:"layout"},Ne=Ve(()=>a("div",{class:"top"},null,-1)),qe={class:"links",ref:"linksParent"},ze={class:"route-wrapper",ref:"wrapper"},De=L({name:"Layout",__name:"index",setup(x){ve(e=>({"7c5cfe55":i.value}));const l={HomePage:"shapes",BusinessData:"monitor",MemberMgt:"cat",AgentManage:"dog",MoneyMgt:"money",ActivityMgt:"balloon",MessageMgt:"earth",ReportMgt:"mouse",GameMgt:"game",SystemMgt:"gun",MaintainMgt:"skull"},g=R(),u=w(null),i=w(0),f=w([]);function $(e){var s;e&&((s=e.querySelector(".router-link-active"))==null||s.scrollIntoView({block:"center"}))}return fe("excludeAlivePage",f),(e,s)=>{const b=C("svg-icon"),_=C("rk-scroll");return o(),m("div",Re,[a("aside",{onTransitionstart:s[0]||(s[0]=H(p=>$(e.$refs.linksParent),["self"]))},[Ne,a("div",qe,[(o(!0),m(I,null,N(c(g).routesSetting,(p,M)=>(o(),v(O,{key:M,ref_for:!0,ref_key:"links",ref:u,item:p,"extract-only-child":!1},{prefix:S(()=>[r(b,{icon:l[p.name]||"building"},null,8,["icon"])]),_:2},1032,["item"]))),128))],512),r(_,{"get-target":()=>e.$refs.linksParent},null,8,["get-target"])],32),a("main",null,[r(Pe),a("div",ze,[r(c(ke),null,{default:S(({Component:p})=>[r(Z,{name:"fade",mode:"out-in",appear:""},{default:S(()=>[(o(),v(he,{exclude:f.value},[(o(),v(ye(p),{class:"route-block"}))],1032,["exclude"]))]),_:2},1024)]),_:1})],512),r(_,{"get-target":()=>e.$refs.wrapper},null,8,["get-target"]),r(_,{"get-target":()=>e.$refs.wrapper,horizontal:"",onUpdated:s[1]||(s[1]=p=>i.value=p.wrapperHeight)},null,8,["get-target"])]),r(_,{"get-target":()=>e.$el,horizontal:""},null,8,["get-target"])])}}});const Ue=P(De,[["__scopeId","data-v-1fb748fd"]]);export{Ue as default};
