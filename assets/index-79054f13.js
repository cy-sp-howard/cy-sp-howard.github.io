var P=Object.defineProperty;var W=(i,t,n)=>t in i?P(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var _=(i,t,n)=>(W(i,typeof t!="symbol"?t+"":t,n),n);import{d as V,c as L,b as Y,i as g,j as b,k as v,m as l,w as y,q as f,s as N,t as x,_ as E,S as A,G as d,a1 as j,r as h,h as z,J as F,O,n as I,o as w,D as U,p as T,l as C,K as q,a2 as G,A as J,a3 as K,a4 as Z,a5 as $,E as Q,P as B,y as R,a as X}from"./index-ce2f2e21.js";import ee from"./useMsg-832f345d.js";const te={id:"audit-detail"},oe=V({__name:"detailDialog",setup(i){const{texts:t}=L("ChildChild2"),n=Y(),{addMsg:e}=ee();function o(){e({text:t.value.成功})}return(r,s)=>{const u=g("rk-input"),p=g("rk-button"),M=g("rk-tip");return f(),b("form",te,[v(u,{modelValue:l(n).account,"onUpdate:modelValue":s[0]||(s[0]=c=>l(n).account=c),label:l(t).帳號,disabled:""},null,8,["modelValue","label"]),v(M,{class:"tip","anchor-y":"bottom",text:l(t).顯示訊息},{default:y(({showText:c,closeText:a})=>[v(p,{color:"success",onClick:o,onMouseenter:c,onMouseleave:a},{default:y(()=>[N(x(l(t).訊息),1)]),_:2},1032,["onMouseenter","onMouseleave"])]),_:1},8,["text"])])}}});const ne=E(oe,[["__scopeId","data-v-2c63cfab"]]),se=["onMousedown"],ae={key:0,class:"dialog-box"},ie={class:"box-header"},le=["onClick"],re={class:"box-content"},ce=V({__name:"rkDialog",props:{title:{}},emits:["closing","closed"],setup(i,{expose:t,emit:n}){A("close",p);const e=d.throttle(M,200);j(()=>o.value,e);const o=h(null),r=h(!1),s=h(!1),u=z({alignItems:"",justifyContent:""});function p(){s.value||(s.value=!0,n("closing"))}function M(){if(!o.value||!(o.value.firstChild instanceof HTMLElement))return;const{offsetHeight:c,offsetWidth:a}=o.value,{offsetHeight:S,offsetWidth:k}=o.value.firstChild;u.alignItems=S<=c?"center":"flex-start",u.justifyContent=k<=a?"center":"flex-start"}return F(e),t({close:p}),(c,a)=>{const S=g("svg-icon"),k=g("rk-scroll");return f(),b("div",{class:"rk-dialog",ref_key:"el",ref:o,style:U(u),onMousedown:T(p,["self"]),onAnimationendCapture:a[2]||(a[2]=(...m)=>l(e)&&l(e)(...m)),onTransitionendCapture:a[3]||(a[3]=(...m)=>l(e)&&l(e)(...m))},[v(O,{name:"dialog",appear:"",onAfterLeave:a[0]||(a[0]=m=>s.value&&c.$emit("closed")),onAfterEnter:a[1]||(a[1]=m=>r.value=!0)},{default:y(()=>[s.value?w("",!0):(f(),b("div",ae,[C("div",ie,x(c.title),1),C("button",{onClick:T(p,["prevent"])},[v(S,{icon:"close"})],8,le),C("div",re,[q(c.$slots,"default",{},void 0,!0)])]))]),_:3}),r.value?(f(),I(k,{key:0,"get-target":()=>o.value},null,8,["get-target"])):w("",!0),r.value?(f(),I(k,{key:1,"get-target":()=>o.value,horizontal:""},null,8,["get-target"])):w("",!0)],44,se)}}});const de=E(ce,[["__scopeId","data-v-bfc9a423"]]);class ue{constructor(t,n){_(this,"app");_(this,"dialogProps",{});_(this,"root");_(this,"provides",{});_(this,"contentComponent");this.root=void 0,this.app=void 0,this.contentComponent=t,n&&(this.dialogProps=n);const e=B();e&&(G(()=>{d.assign(this.provides,e.parent===null?e.vnode.appContext&&e.vnode.appContext.provides:e.parent.provides,e.provides)}),J(()=>{d.invoke(this.dialog,"close")}),K(()=>{d.invoke(this.dialog,"close")}))}get content(){var t;return(t=this.root)==null?void 0:t.$refs.content}get dialog(){var t;return(t=this.root)==null?void 0:t.$refs.dialog}closeMask(){this.app&&H(-1)}open(t,n){const e=this;e.app||(H(1),e.app=Z({component:{setup(){const o=B(),r=h(0);return A("reload",s=>{t=d.assign({},t,s),r.value+=1}),d.each(e.provides,(s,u)=>A(u,s)),o!=null&&o.proxy&&(e.root=o.proxy),{key:r}},render(){return $(Q,{to:"body"},$(de,d.assign({},e.dialogProps,{onClosing:()=>{e.closeMask.call(e);const{onClosing:o}=e.dialogProps;o instanceof Function&&o()},onClosed:()=>{e.root=void 0,e.app&&(e.app.unmount(),e.app=void 0);const{onClosed:o}=e.dialogProps;o instanceof Function&&o()},ref:"dialog"}),{default:()=>$(e.contentComponent,d.assign({ref:"content",key:this.key},t),n)}))}}}).app)}close(){d.invoke(this.dialog,"close")}}const D=document.createElement("span");D.classList.add("mask");document.body.prepend(D);function H(i){const t=D;return t.dataset.mask=String((Number(t.dataset.mask)||0)+i),new Promise(n=>{const e=new AbortController;D.addEventListener("transitionend",()=>{n(),e.abort()},{signal:e.signal})})}const pe={id:"child-child-2"},_e=V({name:"ChildChild2",__name:"index",setup(i){const{texts:t}=L("ChildChild2"),n=new ue(ne),e=h(0),o=R(()=>X("2020-02-03T20:00:00Z").format("YYYY/MM/DD HH:mm:SS"));function r(){e.value+=1,n.dialogProps.title=t.value.詳情,setTimeout(()=>{e.value-=1,n.open()},1e3)}return(s,u)=>{const p=g("rk-button");return f(),b("div",pe,[C("span",null,x(o.value),1),v(p,{loading:e.value,color:"success",onClick:r},{default:y(()=>[N(x(l(t).彈窗),1)]),_:1},8,["loading"])])}}});const me=E(_e,[["__scopeId","data-v-b87e6ffe"]]);export{me as default};
